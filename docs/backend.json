
{
  "entities": {
    "OrderDraft": {
      "title": "Order Draft",
      "description": "A partially completed order saved for later completion with metadata for routing and tracking.",
      "type": "object",
      "properties": {
        "orderId": { "type": "string" },
        "id": { "type": "string", "description": "Duplicate of orderId for reference" },
        "eventDetails": { "type": "object" },
        "deliverables": { "type": "array" },
        "paymentReceived": { "type": "number" },
        "currentStep": { "type": "string" },
        "lastSavedAt": { "type": ["object", "null"], "description": "Firestore Server Timestamp" }
      },
      "required": ["orderId", "eventDetails"]
    },
    "ActiveOrder": {
      "title": "Active Order",
      "description": "A finalized and activated order ready for fulfillment.",
      "type": "object",
      "properties": {
        "orderId": { "type": "string" },
        "id": { "type": "string" },
        "eventDetails": { "type": "object" },
        "deliverables": { "type": "array" },
        "paymentReceived": { "type": "number" },
        "currentStep": { "type": "string" },
        "lastSavedAt": { "type": ["object", "null"] },
        "activatedAt": { "type": "object", "description": "Firestore Server Timestamp" }
      },
      "required": ["orderId", "eventDetails", "activatedAt"]
    }
  },
  "auth": {
    "providers": ["google.com"]
  },
  "firestore": {
    "/drafts/{orderId}": {
      "schema": "OrderDraft",
      "description": "Store for partially completed order drafts. (Deployment Version: v7 - Resilience Fix)"
    },
    "/active-orders/{orderId}": {
      "schema": "ActiveOrder",
      "description": "Store for confirmed and activated orders. (Deployment Version: v7 - Resilience Fix)"
    }
  }
}
